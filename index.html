<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <!-- Google tag (gtag.js) -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-4WXT2RQ0SV"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4WXT2RQ0SV');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุญููุจุฉ ุงููุคูู - ุงูุฅุตุฏุงุฑ ุงูููุจุฉ</title>
    <!-- PWA Manifest -->
<!-- PWA Support -->
<link rel="manifest" href="manifest.json">
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta name="theme-color" content="#2F5F63">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="ุญููุจุฉ ุงููุคูู">
<link rel="apple-touch-icon" href="icon-180.png">
<link rel="apple-touch-icon" sizes="180x180" href="icon-180.png">
<link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">

    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<!-- ุงูุถูู -->
<div id="sideMenu" class="side-menu">
    <button class="close-btn" onclick="toggleMenu()">ร</button>
<div id="userProfile" style="text-align: center; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 12px; margin-bottom: 20px; display: none;">
    <img id="userPhoto" src="" alt="avatar" style="width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--gold); margin-bottom: 10px;">
    <div id="userName" style="color: white; font-weight: bold; font-size: 14px;"></div>
    <div id="userEmail" style="color: var(--gold); font-size: 11px; opacity: 0.8;"></div>
    <button onclick="logout()" style="background: transparent; border: 1px solid #ff4d4d; color: #ff4d4d; border-radius: 5px; padding: 3px 10px; font-size: 10px; margin-top: 10px; cursor: pointer;">ุชุณุฌูู ุฎุฑูุฌ</button>
</div>

<div id="loginGuest" style="text-align: center; padding: 15px; margin-bottom: 20px;">
    <p style="font-size: 12px; color: #ccc;">ุฃูุช ุชุชุตูุญ ูุถูู</p>
    <button class="menu-tool-btn" onclick="loginAndSync()" style="width: 100%; margin-top: 5px;">ุฑุจุท ุงูุญุณุงุจ ุจุณุญุงุจุฉ ุฌูุฌู โ๏ธ</button>
</div>
<!-- ุฒุฑ ุงูุฅูุฌุงุฒุงุช (ูุธูุฑ ููุท ูููุณุฌููู) -->
<div id="achievementsBtn" style="display: none; text-align: center; margin-bottom: 20px;">
    <button class="menu-tool-btn" onclick="openAchievements()" style="width: 100%; background: var(--gold); color: var(--dark-teal); font-weight: bold;">
        ๐ ุฅูุฌุงุฒุงุชู
    </button>
</div>

    <h3 style="text-align:center;color:var(--gold);">ุงูุฅุนุฏุงุฏุงุช</h3>
    <hr style="border:0.5px solid rgba(201,176,122,0.3);">

    <div class="menu-item">
        <span>ุงููุถุน ุงููุธูู</span>
        <button id="darkModeBtn" class="menu-tool-btn" onclick="toggleDarkMode()">๐</button>
    </div>
<div class="menu-item">
    <span>ูุฒุงููุฉ ุงูุฎุชูุฉ (ุณุญุงุจู)</span>
    <button class="menu-tool-btn" onclick="loginAndSync()">โ๏ธ</button>
</div>

<div class="menu-item">
    <span>ุฅุดุนุงุฑุงุช ุงููุธุงู</span>
    <button class="menu-tool-btn" onclick="requestNotify()">๐</button>
</div>
    <div class="menu-item">
        <span>ุฃุตูุงุช ุงูุชูุจูู</span>
        <button id="muteBtn" class="menu-tool-btn" onclick="toggleMute()">๐</button>
    </div>

    <div class="menu-item">
        <span>ุญุฌู ุงูุฎุท</span>
        <div class="font-controls">
            <button class="menu-tool-btn" onclick="changeFontSize(2)">A+</button>
            <button class="menu-tool-btn" onclick="changeFontSize(-2)">A-</button>
        </div>
    <div class="menu-item">
    <span>ุชุญุฏูุซ ุงููููุน</span>
    <button class="menu-tool-btn" onclick="getQibla()">๐</button>
</div>

<div class="menu-item">
    <span>ุชูุจููุงุช ุงูุฃุฐุงู</span>
    <button id="notifBtn" class="menu-tool-btn" onclick="requestNotificationPermission()">๐</button>
</div>

</div>

    </div>

    <p style="font-size:12px;text-align:center;margin-top:50px;opacity:0.6;">
        ุฅุตุฏุงุฑ ุญููุจุฉ ุงููุคูู 2025
    </p>
</div>

<header>
    <div class="menu-icon" onclick="toggleMenu()">โฐ</div>
    <h1>ุญููุจุฉ ุงููุคูู</h1>
    
    <div class="main-nav">
<div class="quran-menu-wrapper">
    <button id="quranTab" class="active dropbtn" onclick="toggleQuranDropdown(event)">ุงููุฑุขู ุงููุฑูู โพ</button>
    <div id="quranDropdown" class="dropdown-content">
    <a href="javascript:void(0)" onclick="selectQuranOption('quran')">ุงููุตุญู ูุงููุงู</a>
    <a href="javascript:void(0)" onclick="selectQuranOption('paper-mushaf')">๐ ุงููุตุญู ุงููุฑูู</a>
    <a href="javascript:void(0)" onclick="selectQuranOption('topics')">ุงูููุฑุณ ุงูููุถูุนู</a>
</div>
</div>

        <button id="azkarTab" onclick="switchMainTab('azkar')">ูุณู ุงูุฃุฐูุงุฑ</button>
       <div class="quran-menu-wrapper">
    <button id="sebhaTab" class="dropbtn" onclick="toggleSebhaDropdown(event)">ุงูุณุจุญุฉ โพ</button>
    <div id="sebhaDropdown" class="dropdown-content">
        <a href="javascript:void(0)" onclick="selectSebhaType('tasbih')">๐ฟ ุงูุชุณุจูุญ</a>
        <a href="javascript:void(0)" onclick="selectSebhaType('istighfar')">๐คฒ ุงูุงุณุชุบูุงุฑ</a>
        <a href="javascript:void(0)" onclick="selectSebhaType('tahmid')">โค๏ธ ุงูุชุญููุฏ</a>
        <a href="javascript:void(0)" onclick="selectSebhaType('takbir')">โ๏ธ ุงูุชูุจูุฑ</a>
        <a href="javascript:void(0)" onclick="selectSebhaType('salah')">๐ ุงูุตูุงุฉ ุนูู ุงููุจู</a>
    </div>
</div>

        <button id="prayerTab" onclick="switchMainTab('prayer')">ููุงููุช ุงูุตูุงุฉ</button>
<button id="qiblaTab" onclick="switchMainTab('qibla')">ุงุชุฌุงู ุงููุจูุฉ</button>
<button id="khatmaTab" onclick="switchMainTab('khatma')">ุชุญุฏู ุงูุฎุชูุฉ ๐</button>

    </div>
</header>

<div class="container">

<!-- ================= ุงููุฑุขู ================= -->
<div id="quran-section">
    
    <div id="full-quran-view">
        <div id="daily-content" class="daily-card">
            <div class="daily-header">
                <span class="daily-icon">๐</span>
                <span class="daily-title">ุขูุฉ ุงูููู</span>
            </div>
            <p id="daily-text" class="daily-text">ุฌุงุฑู ุชุญููู ุงูุขูุฉ...</p>
            <small id="daily-ref" class="daily-ref"></small>
            <button onclick="copyDailyAyah()" class="copy-btn">ูุณุฎ ุงูุขูุฉ ๐</button>
        </div>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ุณูุฑุฉ..." onkeyup="filterSurahs()">
        </div>
        <div class="surah-grid" id="surahList"></div>
    </div>

    <div id="quran-view" style="display:none;">
        <div style="text-align:center;margin:10px;">
            <button class="modern-back-btn" onclick="showMain()">๐ ุงูุนูุฏุฉ ูููุงุฆูุฉ</button>
        </div>

        <div class="player-container modern-style">
            <h2 id="current-surah-title"></h2>

            <div class="reciter-section">
                <select id="reciterSelect" onchange="updateAudioSource()">
                    <option value="afs">๐๏ธ ูุดุงุฑู ุงูุนูุงุณู</option>
                    <option value="minsh">๐๏ธ ูุญูุฏ ุตุฏูู ุงูููุดุงูู</option>
                    <option value="basit">๐๏ธ ุนุจุฏ ุงูุจุงุณุท ุนุจุฏ ุงูุตูุฏ</option>
                    <option value="husr">๐๏ธ ูุญููุฏ ุฎููู ุงูุญุตุฑู</option>
                    <option value="maher">๐๏ธ ูุงูุฑ ุงููุนูููู</option>
                    <option value="qtm">๐๏ธ ูุงุตุฑ ุงููุทุงูู</option>
                    <option value="yasser">๐๏ธ ูุงุณุฑ ุงูุฏูุณุฑู</option>
                </select>
            </div>

            <div class="modern-player-layout">
                <button id="playBtn" class="play-btn-small" onclick="toggleAudio()">โท</button>
                <div class="progress-wrapper">
                    <span id="currentTime">0:00</span>
                    <input type="range" id="seekSlider" value="0" max="100" oninput="seekAudio()">
                    <span id="durationTime">0:00</span>
                </div>
            </div>

            <audio id="audioPlayer"></audio>
        </div>

        <div class="ayah-text" id="ayahsContainer"></div>
    </div>

    <div id="topics-view" style="display:none; padding:10px;">
        <h3 style="color:var(--gold); text-align:center; margin-bottom:20px; font-size: 1.5rem;">ุงูููุฑุณ ุงูููุถูุนู ุงูุฌุงูุน</h3>
        <div class="surah-grid">
            <div class="surah-card" onclick="showTopicSurahs('ูุตุต ุงูุฃูุจูุงุก', [11, 12, 14, 18, 19, 20, 21, 28])">๐ ูุตุต ุงูุฃูุจูุงุก</div>
            <div class="surah-card" onclick="showTopicSurahs('ุฃููุงู ุงูููุงูุฉ', [75, 78, 81, 82, 84, 99, 101])">๐ ุฃููุงู ุงูููุงูุฉ</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุนุจุงุฏุงุช ูุงูุฃุญูุงู', [2, 4, 5, 9, 22, 24, 62])">๐ ุงูุนุจุงุฏุงุช ูุงูุฃุญูุงู</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุฑููุฉ ูุงูุดูุงุก', [1, 112, 113, 114, 17, 10])">๐ก๏ธ ุงูุฑููุฉ ูุงูุดูุงุก</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุฃุฎูุงู ูุงูุขุฏุงุจ', [31, 49, 103, 104, 107, 68])">โค๏ธ ุงูุฃุฎูุงู ูุงูุขุฏุงุจ</div>
            <div class="surah-card" onclick="showTopicSurahs('ุนุธูุฉ ุงูุฎุงูู', [13, 16, 27, 30, 35, 41, 55])">๐ ุนุธูุฉ ุงูุฎุงูู</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุฌูุฉ ููุนูููุง', [55, 56, 76, 88, 39, 43])">๐ณ ุงูุฌูุฉ ููุนูููุง</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุตุจุฑ ูุงูุงุจุชูุงุก', [2, 3, 90, 93, 94, 103])">๐ ุงูุตุจุฑ ูุงูุงุจุชูุงุก</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุชูุญูุฏ ูุงูุนููุฏุฉ', [1, 112, 109, 2, 3, 59])">โ๏ธ ุงูุชูุญูุฏ ูุงูุนููุฏุฉ</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงููุณุจุญุงุช', [57, 59, 61, 62, 64])">โจ ุงููุณุจุญุงุช</div>
        </div>
        <button onclick="selectQuranOption('quran')" style="margin: 30px auto; display: block; background:var(--gold); color:var(--dark-teal); border:none; padding:12px 25px; border-radius:12px; cursor:pointer; font-family:'Amiri', serif; font-weight:bold;">ุงูุนูุฏุฉ ูููุตุญู ุงููุงูู</button>
    </div>

</div>

<!-- ================= ุงูุฃุฐูุงุฑ ================= -->
<div id="azkar-section" style="display:none;">
    <div class="azkar-categories" id="azkarCats">
        <div class="category-card" onclick="loadAzkar('morning')">โ๏ธ ุฃุฐูุงุฑ ุงูุตุจุงุญ</div>
        <div class="category-card" onclick="loadAzkar('evening')">๐ ุฃุฐูุงุฑ ุงููุณุงุก</div>
        <div class="category-card" onclick="loadAzkar('sleep')">๐ ุฃุฐูุงุฑ ุงูููู</div>
        <div class="category-card" onclick="loadAzkar('afterPrayer')">๐ฟ ุจุนุฏ ุงูุตูุงุฉ</div>
        <div class="category-card" onclick="loadAzkar('generalDuas')">๐คฒ ุฃุฏุนูุฉ ูุจููุฉ</div>
    </div>

    <div id="azkar-content" style="display:none;">
        <div class="top-controls">
            <button class="modern-back-btn" onclick="backToAzkarCats()">โฉ ุงูุนูุฏุฉ</button>
            <button class="modern-reset-soft" onclick="resetAzkarProgress()">ุชุตููุฑ</button>
        </div>

        <h2 id="azkar-title" style="text-align:center;color:var(--gold);"></h2>
        <div id="azkarList"></div>
    </div>
</div>
<!-- ================= ุงูุณุจุญุฉ ================= -->
<!-- ================= ุงูุณุจุญุฉ ================= -->
<div id="sebha-section" style="display:none;">
    
    <!-- ูุงุฆูุฉ ุงุฎุชูุงุฑ ููุน ุงูุณุจุญุฉ -->
    <div id="sebha-categories" style="display:grid;">
        <h3 style="text-align:center; color:var(--gold); grid-column: 1/-1;">ุงุฎุชุฑ ููุน ุงูุฐูุฑ</h3>
        <div class="category-card" onclick="selectSebhaType('tasbih')">๐ฟ ุงูุชุณุจูุญ</div>
        <div class="category-card" onclick="selectSebhaType('istighfar')">๐คฒ ุงูุงุณุชุบูุงุฑ</div>
        <div class="category-card" onclick="selectSebhaType('tahmid')">โค๏ธ ุงูุชุญููุฏ</div>
        <div class="category-card" onclick="selectSebhaType('takbir')">โ๏ธ ุงูุชูุจูุฑ</div>
        <div class="category-card" onclick="selectSebhaType('salah')">๐ ุงูุตูุงุฉ ุนูู ุงููุจู</div>
    </div>

    <!-- ูุงุฌูุฉ ุงูุณุจุญุฉ ุงูุฑุฆูุณูุฉ -->
    <div id="sebha-main-view" style="display:none;">
        <div style="text-align:center;margin:10px;">
            <button class="modern-back-btn" onclick="backToSebhaCategories()">โฉ ุงูุนูุฏุฉ ููุฃูุณุงู</button>
        </div>

        <h2 id="sebha-type-title" style="text-align:center; color:var(--gold);">๐ฟ ุงูุชุณุจูุญ</h2>
        <p id="sebha-type-text" style="text-align:center; font-size:1.5rem; color:var(--dark-teal); font-weight:bold; margin:10px;">ุณูุจูุญูุงูู ุงูููููู</p>

        <div class="goal-setting">
            ุงููุฏู ุงููููู:
            <input type="number" id="sebhaGoal" value="100" min="1" onchange="updateGoal()">
        </div>

        <div class="progress-container">
            <div id="sebhaBar" class="progress-bar"></div>
        </div>

        <div class="sebha-circle" onclick="incrementSebha()">
            <span id="sebhaCounter">0</span>
            <small id="sebhaStatus">ุงุถุบุท ููุฐูุฑ</small>
        </div>

        <button class="modern-reset-soft" onclick="resetSebha()">ุชุตููุฑ ุงูุนุฏุงุฏ</button>

        <div class="timer-wrapper">
            <span>ุงูุชุตููุฑ ุงูุชููุงุฆู:</span>
            <div id="countdown-timer" class="modern-timer">00:00:00</div>
        </div>
    </div>
</div>

<div id="prayer-section" style="display:none; text-align:center;">
    <div class="prayer-hero-card">
        <h3 id="next-prayer-name">ุฌุงุฑู ุชุญุฏูุฏ ูููุนู...</h3>
        <div id="next-prayer-timer" class="big-timer">00:00:00</div>
    </div>

    <div class="prayer-detailed-grid">
        <div class="p-card"><span>ุงููุฌุฑ</span><b id="fajr-time">--:--</b></div>
        <div class="p-card"><span>ุงูุธูุฑ</span><b id="dhuhr-time">--:--</b></div>
        <div class="p-card"><span>ุงูุนุตุฑ</span><b id="asr-time">--:--</b></div>
        <div class="p-card"><span>ุงููุบุฑุจ</span><b id="maghrib-time">--:--</b></div>
        <div class="p-card"><span>ุงูุนุดุงุก</span><b id="isha-time">--:--</b></div>
    </div>
</div>
<div id="qibla-section" style="display:none; text-align:center;">
    <div class="qibla-container">
        <h3>ุงุชุฌุงู ุงููุจูุฉ</h3>
        
        <button id="enable-compass-btn" onclick="askCompassPermission()" style="background:var(--gold); color:var(--dark-teal); border:none; padding:10px 20px; border-radius:12px; font-weight:bold; margin-bottom:15px; cursor:pointer; font-family:'Amiri', serif;">
            ุชุดุบูู ุงูุจูุตูุฉ ุงูุญูุฉ ๐งญ
        </button>

        <div class="compass" style="position: relative;">
            <div class="compass-arrow" id="compass-pointer"></div>
            <div class="kaaba-icon">๐</div>
        </div>
        <div class="qibla-degrees"><span id="qibla-deg">--</span>ยฐ</div>
        <p id="qibla-status" style="margin-top:10px; font-size:14px;">ุงุถุบุท ุงูุฒุฑ ูุชูุนูู ุงูุญุฑูุฉ</p>
    </div>
</div>
<div id="khatma-section" style="display:none; text-align:center; padding:20px;">
    <div class="daily-card shadow-lg" style="background: white; border-radius: 15px; padding: 20px; max-width: 800px; margin: auto;">
        <h2 style="color:var(--gold);">๐ ุชุญุฏู ุงูุฎุชูุฉ (30 ููู)</h2>
        
        <div class="progress-container" style="height: 20px; background:#eee; border-radius:10px; overflow:hidden; margin-top:10px;">
            <div id="totalKhatmaBar" style="background: linear-gradient(90deg, #d4af37, #f1c40f); width: 0%; height:100%; transition: 0.5s;"></div>
        </div>
        <small id="total-percent-text" style="color:var(--dark-teal); font-weight:bold; display:block; margin-top:5px;">ุงูุชูุฏู ุงูููู: 0%</small>

        <hr style="margin:20px 0; opacity: 0.2;">

        <div id="khatma-reading-area" style="display:none;">
            <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                <small id="juz-progress-text" style="color:var(--dark-teal); font-weight:bold;">ุชูุฏูู ูู ุงูุฌุฒุก: 0%</small>
            </div>
            <div class="progress-container" style="height: 10px; background:#ddd; border-radius:5px; margin-bottom:15px;">
                <div id="juzInnerBar" style="background: var(--dark-teal); width: 0%; height:100%; transition: 0.3s;"></div>
            </div>

            <h3 id="khatma-surah-title" style="color:var(--gold); margin-bottom:15px;"></h3>
            
            <div id="khatma-ayahs-display" style="background:#fff; padding:20px; border-radius:15px; font-size:1.6rem; line-height:2.8; text-align:right; border:2px solid var(--gold); max-height:500px; overflow-y:auto; direction:rtl; font-family: 'Amiri', serif;">
                </div>

            <p style="margin-top:10px; font-size:0.9rem; color:#666;">๐ก ุงุถุบุท ุนูู ุฑูู ุงูุขูุฉ ุนูุฏ ูุตููู ุฅูููุง ูุญูุธ ุชูุฏูู.</p>
            
            <div style="margin-top:20px;">
                <button onclick="markFullJuzDone()" style="background:#27ae60; color:white; border:none; padding:12px 25px; border-radius:8px; font-weight:bold; cursor:pointer;">โ ุฃูููุช ุงูุฌุฒุก ูุงููุงู</button>
                <button onclick="closeKhatmaReading()" style="background:#95a5a6; color:white; border:none; padding:12px 25px; border-radius:8px; margin-right:10px; cursor:pointer;">ุฅุบูุงู</button>
            </div>
        </div>

        <div id="khatma-intro">
            <h3 id="daily-task-title" style="color:var(--dark-teal);">ูุฑุฏ ุงูููู (ุงูุฌุฒุก 1)</h3>
            <p style="color:#7f8c8d; margin-bottom:20px;">ุงุจุฏุฃ ูุฑุฏู ุงููููู ูุณุฌู ุชูุฏูู ุขูุฉ ุจุขูุฉ</p>
            <button class="modern-back-btn" style="background:var(--dark-teal); color:var(--gold); padding:15px 40px; font-size:1.1rem; border-radius:30px; cursor:pointer; border:none;" onclick="startKhatmaReading()">๐ ุงุจุฏุฃ ุงููุฑุงุกุฉ ุงูุขู</button>
        </div>
    </div>
</div>
<!-- ================= ูุณู ุงูุฅูุฌุงุฒุงุช ================= --><!-- ================= ูุณู ุงูุฅูุฌุงุฒุงุช ================= -->
<div id="achievements-section" style="display:none; padding:20px;">
    <div style="text-align:center; margin-bottom:20px;">
        <button class="modern-back-btn" onclick="closeAchievements()">โฉ ุงูุนูุฏุฉ</button>
    </div>

    <div class="daily-card shadow-lg" style="max-width: 900px; margin: auto;">
        <h2 style="color:var(--gold); text-align:center;">๐ ุฅูุฌุงุฒุงุชู ุงูุฅููุงููุฉ</h2>
        
        <!-- โจ ุฌุฏูุฏ: ุงููุณุชูู ูุงูู XP -->
        <div style="background: linear-gradient(135deg, var(--dark-teal), #1a3f42); padding: 20px; border-radius: 15px; margin: 20px 0; color: white; text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 10px;">โญ</div>
            <h3 style="margin: 5px 0; color: var(--gold);" id="current-level-title">ุงููุณุชูู 1</h3>
            <p style="margin: 5px 0; font-size: 1.1rem;" id="current-level-xp">0 XP</p>
            
            <!-- ุดุฑูุท ุชูุฏู ุงููุณุชูู -->
            <div style="background: rgba(255,255,255,0.2); height: 15px; border-radius: 10px; margin: 15px auto; max-width: 400px; overflow: hidden;">
                <div id="level-progress-bar" style="background: var(--gold); height: 100%; width: 0%; transition: 0.5s;"></div>
            </div>
            <small id="next-level-text" style="opacity: 0.9;">100 XP ูููุณุชูู ุงูุชุงูู</small>
        </div>

        <!-- โจ ุฌุฏูุฏ: ุงูุณูุณูุฉ ุงูููููุฉ -->
        <div style="background: linear-gradient(135deg, #e74c3c, #c0392b); padding: 20px; border-radius: 15px; margin: 20px 0; color: white; text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 10px;">๐ฅ</div>
            <h3 style="margin: 5px 0;">ุงูุณูุณูุฉ ุงูููููุฉ</h3>
            <p style="font-size: 2.5rem; font-weight: bold; margin: 10px 0;" id="current-streak-display">0</p>
            <p style="margin: 5px 0; font-size: 0.95rem;">ููู ูุชูุงุตู</p>
            <small style="opacity: 0.9;">ุฃุทูู ุณูุณูุฉ: <span id="longest-streak-display">0</span> ููู</small>
        </div>

        <!-- โจ ุฌุฏูุฏ: ุงูุดุงุฑุงุช ุงููุญุตูุฉ -->
        <div style="background: white; padding: 20px; border-radius: 15px; margin: 20px 0; border: 2px solid var(--gold);">
            <h3 style="color: var(--dark-teal); text-align: center; margin-bottom: 15px;">๐ ุงูุดุงุฑุงุช ุงููุญุตูุฉ</h3>
            <div id="badges-display" style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; min-height: 80px;">
                <p style="color: #999; width: 100%; text-align: center;">ูู ุชุญุตู ุนูู ุฃู ุดุงุฑุฉ ุจุนุฏ</p>
            </div>
        </div>

        <hr style="border: 1px solid rgba(201,176,122,0.3); margin: 30px 0;">

        <!-- ูุนูููุงุช ุงูุนุถููุฉ -->
        <div style="background: rgba(47,95,99,0.05); padding: 15px; border-radius: 12px; margin: 20px 0; text-align:center;">
            <p style="font-size: 1.1rem; color: var(--dark-teal); margin: 5px;">
                ๐ <strong>ุนุถู ููุฐ:</strong> <span id="member-since">ุฌุงุฑู ุงูุชุญููู...</span>
            </p>
            <p style="font-size: 1.1rem; color: var(--dark-teal); margin: 5px;">
                โฑ๏ธ <strong>ุนุฏุฏ ุงูุฃูุงู:</strong> <span id="days-count">0</span> ููู
            </p>
        </div>

        <hr style="border: 1px solid rgba(201,176,122,0.3); margin: 20px 0;">

        <!-- ุฅุญุตุงุฆูุงุช ุงูุณุจุญุฉ -->
        <h3 style="color: var(--dark-teal); text-align: center; margin: 20px 0;">๐ฟ ุฅุญุตุงุฆูุงุช ุงูุฐูุฑ</h3>
        <div class="achievements-grid">
            <div class="achievement-card">
                <div class="achievement-emoji">๐ฟ</div>
                <div class="achievement-title">ุงูุชุณุจูุญ</div>
                <div class="achievement-count" id="total-tasbih">0</div>
                <div class="achievement-label">ูุฑุฉ</div>
            </div>

            <div class="achievement-card">
                <div class="achievement-emoji">๐คฒ</div>
                <div class="achievement-title">ุงูุงุณุชุบูุงุฑ</div>
                <div class="achievement-count" id="total-istighfar">0</div>
                <div class="achievement-label">ูุฑุฉ</div>
            </div>

            <div class="achievement-card">
                <div class="achievement-emoji">โค๏ธ</div>
                <div class="achievement-title">ุงูุชุญููุฏ</div>
                <div class="achievement-count" id="total-tahmid">0</div>
                <div class="achievement-label">ูุฑุฉ</div>
            </div>

            <div class="achievement-card">
                <div class="achievement-emoji">โ๏ธ</div>
                <div class="achievement-title">ุงูุชูุจูุฑ</div>
                <div class="achievement-count" id="total-takbir">0</div>
                <div class="achievement-label">ูุฑุฉ</div>
            </div>

            <div class="achievement-card">
                <div class="achievement-emoji">๐</div>
                <div class="achievement-title">ุงูุตูุงุฉ ุนูู ุงููุจู</div>
                <div class="achievement-count" id="total-salah">0</div>
                <div class="achievement-label">ูุฑุฉ</div>
            </div>
        </div>

        <hr style="border: 1px solid rgba(201,176,122,0.3); margin: 30px 0;">

        <!-- ุฅุญุตุงุฆูุงุช ุงููุฑุขู ูุงูุฃุฐูุงุฑ -->
        <h3 style="color: var(--dark-teal); text-align: center; margin: 20px 0;">๐ ุฅุญุตุงุฆูุงุช ุงูุนุจุงุฏุงุช</h3>
        <div class="achievements-grid">
            <div class="achievement-card">
                <div class="achievement-emoji">๐</div>
                <div class="achievement-title">ุงูุฃูุฑุงุฏ ุงูููุชููุฉ</div>
                <div class="achievement-count" id="total-awrad">0</div>
                <div class="achievement-label">ุฌุฒุก</div>
            </div>

            <div class="achievement-card">
                <div class="achievement-emoji">โ</div>
                <div class="achievement-title">ุงูุฃุฐูุงุฑ ุงูููุฑูุกุฉ</div>
                <div class="achievement-count" id="total-azkar">0</div>
                <div class="achievement-label">ุฐูุฑ</div>
            </div>
        </div>

        <!-- ุฑุณุงูุฉ ุชุญููุฒูุฉ -->
        <div style="background: linear-gradient(135deg, var(--dark-teal), #1a3f42); color: var(--gold); padding: 20px; border-radius: 15px; margin-top: 30px; text-align: center;">
            <p style="font-size: 1.2rem; margin: 0;">
                โจ <strong>ุจุงุฑู ุงููู ูู ุนูุฑู ูุฃุนูุงูู!</strong> โจ
            </p>
            <p style="font-size: 0.9rem; margin: 10px 0 0 0; opacity: 0.9;">
                ุงุณุชูุฑ ูู ุทุฑูู ุงูุฎูุฑุ ููู ุฐูุฑุฉ ุชูุณุฌู ูู ููุฒุงู ุญุณูุงุชู ๐
            </p>
        </div>
    </div>
</div>



</div>

<audio id="notificationSound" src="https://www.soundjay.com/buttons/sounds/button-37a.mp3"></audio>
<audio id="azanSound" src="https://www.islamcan.com/common/makkah.mp3" preload="auto"></audio>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
  import {
    getAuth,
    GoogleAuthProvider,
    signInWithPopup,
    onAuthStateChanged,
    signOut
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  /* Firebase Config */
  const firebaseConfig = {
    apiKey: "AIzaSyDAWPEns_hhMY3jAWJd2EqILJ9vxInKfMs",
    authDomain: "alquran-app-f02b9.firebaseapp.com",
    projectId: "alquran-app-f02b9",
    storageBucket: "alquran-app-f02b9.firebasestorage.app",
    messagingSenderId: "283906260546",
    appId: "1:283906260546:web:4215f4193ae35add0777db"
  };

  /* Init */
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();
  
  // ุฌุนู ุงููุชุบูุฑุงุช ูุชุงุญุฉ ุนุงูููุงู
  window.firebaseAuth = auth;
  window.firebaseDb = db;

  // ุฏุงูุฉ ุญูุธ ุงูุจูุงูุงุช ูู Firebase
  window.saveToCloud = async function(type, data) {
    const user = auth.currentUser;
    if (!user) {
      console.log("โ๏ธ ูู ูุชู ุชุณุฌูู ุงูุฏุฎูู");
      return;
    }

    try {
      await setDoc(
        doc(db, "users", user.uid),
        { 
          [type]: data, 
          lastSync: new Date().toISOString(),
          email: user.email,
          displayName: user.displayName
        },
        { merge: true }
      );
      console.log(`โ ุชู ุญูุธ ${type} ูู ุงูุณุญุงุจุฉ`);
    } catch (e) {
      console.error(`โ ุฎุทุฃ ูู ุญูุธ ${type}:`, e);
    }
  };

  // ุฏุงูุฉ ุชุญููู ุงูุจูุงูุงุช ูู Firebase
  async function loadUserData(userId) {
    try {
      console.log("๐ฅ ุฌุงุฑู ุชุญููู ุจูุงูุงุชู...");
      const userDoc = await getDoc(doc(db, "users", userId));
      
      if (userDoc.exists()) {
        const data = userDoc.data();
        
        // ุชุญููู ุงูุฅูุฌุงุฒุงุช
        if (data.achievements) {
          window.achievements = data.achievements;
          localStorage.setItem('achievements', JSON.stringify(data.achievements));
          console.log("โ ุชู ุชุญููู ุงูุฅูุฌุงุฒุงุช ูู ุงูุณุญุงุจุฉ");
        }
        
        // ุชุญููู ุงูุฎุชูุฉ
        if (data.khatma) {
          window.khatmaData = data.khatma;
          localStorage.setItem('khatmaProgress', JSON.stringify(data.khatma));
          if (typeof updateKhatmaUI === 'function') {
            setTimeout(() => updateKhatmaUI(), 500);
          }
          console.log("โ ุชู ุชุญููู ุชูุฏู ุงูุฎุชูุฉ ูู ุงูุณุญุงุจุฉ");
        }
        
        // ุชุญููู ุงูุณุจุญุฉ
        if (data.sebha) {
          window.sebhaCounters = data.sebha;
          localStorage.setItem('sebhaCounters', JSON.stringify(data.sebha));
          console.log("โ ุชู ุชุญููู ุนุฏุงุฏุงุช ุงูุณุจุญุฉ ูู ุงูุณุญุงุจุฉ");
        }
        
        // ุชุญุฏูุซ ูุงุฌูุฉ ุงูุฅูุฌุงุฒุงุช
        if (typeof updateAchievementsUI === 'function') {
          setTimeout(() => updateAchievementsUI(), 800);
        }
        
     
        return true;
        
      } else {
        console.log("๐ ุญุณุงุจ ุฌุฏูุฏ - ุณูุชู ุฅูุดุงุก ูููู ูู ุงูุณุญุงุจุฉ");
        
        // ุญูุธ ุชุงุฑูุฎ ุงูุนุถููุฉ ูุฃูู ูุฑุฉ
        if (window.achievements && !window.achievements.memberSince) {
          window.achievements.memberSince = new Date().toISOString();
          localStorage.setItem('achievements', JSON.stringify(window.achievements));
          await window.saveToCloud('achievements', window.achievements);
        }
        
        return false;
      }
    } catch (e) {
      console.error("โ ุฎุทุฃ ูู ุชุญููู ุงูุจูุงูุงุช:", e);
      alert("โ๏ธ ุญุฏุซ ุฎุทุฃ ูู ุชุญููู ุจูุงูุงุชู ูู ุงูุณุญุงุจุฉ");
      return false;
    }
  }

  /* ูุฑุงูุจ ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู */
  onAuthStateChanged(auth, async (user) => {
    const profileCard = document.getElementById('userProfile');
    const guestCard = document.getElementById('loginGuest');
    const achievementsBtn = document.getElementById('achievementsBtn');

    if (user) {
      // ุฅุธูุงุฑ ุจุทุงูุฉ ุงููุณุชุฎุฏู
      profileCard.style.display = 'block';
      guestCard.style.display = 'none';
      achievementsBtn.style.display = 'block';

      document.getElementById('userName').textContent = user.displayName || 'ูุณุชุฎุฏู';
      document.getElementById('userEmail').textContent = user.email || '';
      document.getElementById('userPhoto').src = user.photoURL || 'https://via.placeholder.com/60';
      
      console.log("โ ูุฑุญุจุงู", user.displayName || user.email);
      
      // ุชุญููู ุงูุจูุงูุงุช ูู ุงูุณุญุงุจุฉ
      await loadUserData(user.uid);
      
    } else {
      // ูุถุน ุงูุถูู
      profileCard.style.display = 'none';
      guestCard.style.display = 'block';
      achievementsBtn.style.display = 'none';
      console.log("๐ค ุชุตูุญ ูุถูู");
    }
  });

  /* ุชุณุฌูู ุงูุฏุฎูู */
  window.loginAndSync = async function() {
    try {
      console.log("๐ ุฌุงุฑู ุชุณุฌูู ุงูุฏุฎูู...");
      const result = await signInWithPopup(auth, provider);
      
      // ุชุญููู ุงูุจูุงูุงุช ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู
      await loadUserData(result.user.uid);
      
    } catch (e) {
      console.error("โ ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู:", e);
      alert("โ ูุดู ุชุณุฌูู ุงูุฏุฎููุ ุชุฃูุฏ ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช");
    }
  };

  /* ุชุณุฌูู ุงูุฎุฑูุฌ */
  window.logout = function() {
    if (confirm("ูู ุชุฑูุฏ ุชุณุฌูู ุงูุฎุฑูุฌุ\n\n(ููุงุญุธุฉ: ุจูุงูุงุชู ูุญููุธุฉ ูู ุงูุณุญุงุจุฉ)")) {
      signOut(auth).then(() => {
        localStorage.clear();
        location.reload();
      });
    }
  };
</script>
<!-- ูุณู ุงููุตุญู ุงููุฑูู -->
<div id="paper-mushaf-section" style="display:none; padding: 20px;">
    
    <!-- ูุงุฑุฏ ุงููุตุญู -->
<div style="background: linear-gradient(90deg, #4A7C7E 0%, #7A9B7E 25%, #B8A676 50%, #D4B896 75%, #C9B07A 100%);
 padding: 25px; border-radius: 20px; margin: 20px auto; max-width: 900px; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
        
        <!-- ุงูููุฏุฑ -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <button onclick="saveMushafBookmark()" style="background: #F4C430; color: #2F5F63; border: none; padding: 10px 20px; border-radius: 12px; font-weight: bold; font-family: 'Amiri', serif; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                ๐ ูุญููุธุฉ
            </button>
            
            <h2 style="color: #F4C430; margin: 0; font-size: 1.5rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                ๐ ุงููุตุญู ุงููุฑูู
            </h2>
            
            <button onclick="closePaperMushaf()" style="background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 8px 20px; border-radius: 12px; font-weight: bold; font-family: 'Amiri', serif; cursor: pointer;">
                ๐ ุฑุฌูุน
            </button>
        </div>
        
        <!-- ุฑูู ุงูุตูุญุฉ -->
        <div style="text-align: center; color: white; font-size: 1.1rem; margin-bottom: 15px; font-weight: bold;">
            ุตูุญุฉ <span id="mushaf-current-page">1</span> ูู 569
        </div>
        
        <!-- ููุทูุฉ ุงูุตูุฑุฉ -->
        <div id="mushaf-normal-view" style="background: white; border-radius: 15px; padding: 20px; box-shadow: inset 0 4px 8px rgba(0,0,0,0.1); position: relative; min-height: 500px; display: flex; align-items: center; justify-content: center;">
            
            <!-- ุงูุฃุฒุฑุงุฑ ุงูุฌุงูุจูุฉ -->
            <button onclick="prevMushafPage()" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); background: #6B5344; color: white; border: none; padding: 20px 15px; border-radius: 12px; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 10;">
                โ
            </button>
            
            <button onclick="nextMushafPage()" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: #6B5344; color: white; border: none; padding: 20px 15px; border-radius: 12px; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 10;">
                โ
            </button>
            
            <!-- ุงูุตูุฑุฉ -->
            <img id="mushaf-page-img" src="" alt="ุตูุญุฉ ุงููุฑุขู" onclick="openFullscreenMushaf()" style="max-width: 100%; max-height: 500px; width: auto; height: auto; box-shadow: 0 8px 20px rgba(0,0,0,0.2); border-radius: 8px; cursor: pointer;">
            
            <!-- Loader -->
            <div id="mushaf-loader" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                <div style="width: 50px; height: 50px; border: 5px solid rgba(244, 196, 48, 0.3); border-top-color: #F4C430; border-radius: 50%; animation: spin 1s linear infinite;"></div>
            </div>
        </div>
        
        <!-- ุฃุฒุฑุงุฑ ุงูุชุญูู ุงูุณูููุฉ -->
        <div style="display: flex; gap: 10px; justify-content: center; align-items: center; margin-top: 20px; flex-wrap: wrap;">
            
            <button onclick="openFullscreenMushaf()" style="background: #F4C430; color: #2F5F63; border: none; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-family: 'Amiri', serif; font-weight: bold; font-size: 1rem;">
                โถ ุนุฑุถ ุจููุก ุงูุดุงุดุฉ
            </button>
            
            <div style="display: flex; gap: 5px; align-items: center;">
                <input type="number" id="mushaf-page-input" min="1" max="569" placeholder="ุฑูู" style="width: 80px; padding: 10px; border: 2px solid #F4C430; border-radius: 8px; text-align: center; font-family: 'Amiri', serif; font-weight: bold;">
                <button onclick="jumpToMushafPage()" style="background: #F4C430; color: #2F5F63; border: none; padding: 10px 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">
                    ุงูุชูุงู
                </button>
            </div>
            
            <button onclick="loadMushafBookmark()" style="background: #e67e22; color: white; border: none; padding: 10px 20px; border-radius: 10px; cursor: pointer; font-family: 'Amiri', serif; font-weight: bold;">
                ๐ ุงูุฐูุงุจ ููุนูุงูุฉ
            </button>
        </div>
        
    </div>
    
</div>

<!-- ุดุงุดุฉ ููุก ุงูุดุงุดุฉ -->
<div id="mushaf-fullscreen-view" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #000; z-index: 99999;">
    
    <!-- ุฒุฑ ุงูุฎุฑูุฌ -->
    <button onclick="closeFullscreenMushaf()" style="position: fixed; top: 15px; right: 15px; background: rgba(255,255,255,0.9); color: #333; border: none; width: 40px; height: 40px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; z-index: 100000; box-shadow: 0 4px 10px rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center;">
        ร
    </button>
    
    <!-- ุงูุตูุฑุฉ -->
    <div id="mushaf-fullscreen-container" style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; touch-action: pan-x;">
        <img id="mushaf-fullscreen-img" src="" alt="ุตูุญุฉ ุงููุฑุขู" style="max-width: 100%; max-height: 100%; width: auto; height: auto; user-select: none;">
    </div>
    
</div>

<style>
@keyframes spin {
    to { transform: rotate(360deg); }
}
</style>



<script src="script.js?v=5"></script>






<!-- Service Worker Registration -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/Quran.github.io/sw.js')
      .then(reg => console.log('โ Service Worker registered'))
      .catch(err => console.log('โ SW error:', err));
  });
}
</script>
<!-- ุงุฎุชุจุงุฑ ุงูุตูุฑ -->


</body>
</html>